%YAML 1.1
---
$schema: "http://stsci.edu/schemas/yaml-schema/draft-01"
id: "asdf://weldx.bam.de/weldx/schemas/datamodels/multi_pass_weld-0.1.0"

title: |
  A generic multi layer GMAW weldment.
description: |
  This schema describes a welding application consisting of multiple passes.

  The individual weldments are hierarchically grouped into beads, layers and seams.

  Eack weldment may contain the following data:

  - TCP
  - welding_current
  - welding_voltage

  Note that this schema is currently work in progress and some optional data will be required in the future.

definitions:
  weld_seam:
    description: |
      A single weld seam consisting of one or more layers.
    type: array
    items:
      $ref: "#/definitions/weld_layer"

  weld_layer:
    description: |
      A single weld layer consisting of one or more beads.
    type: array
    items:
      $ref: "#/definitions/weld_bead"

  weld_bead:
    description: |
      A single weld bead consisting of one or more weldments.
    type: array
    items:
      $ref: "./terms-0.1.0#/weldment"

type: object
properties:
    workpiece:
      description: |
              The workpiece to be welded defined by the base metal and the geometric description of the weld seam.
      type: object

    weld_seam:
      description: |
              List of weld seams composing the final weldment.
      type: array
      items:
        $ref: "#/definitions/weld_seam"

examples:
  -
    - A description needs to be added
    - |
      !<tag:stsci.edu:asdf/core/asdf-1.1.0>
        weld_seam:
        - - - - TCP: !<asdf://weldx.bam.de/weldx/tags/core/transformations/local_coordinate_system-0.1.0>
                  coordinates: !<asdf://weldx.bam.de/weldx/tags/core/variable-0.1.1>
                    name: coordinates
                    dimensions: [c]
                    dtype: <f8
                    units: !<asdf://weldx.bam.de/weldx/tags/units/units-0.1.0> millimeter
                    data: !core/ndarray-1.0.0
                      data: []
                      datatype: float64
                      shape: [3]
                welding_voltage: !<asdf://weldx.bam.de/weldx/tags/core/time_series-0.1.1>
                  units: !<asdf://weldx.bam.de/weldx/tags/units/units-0.1.0> volt
                  value: 10
            - - TCP: !<asdf://weldx.bam.de/weldx/tags/core/transformations/local_coordinate_system-0.1.0>
                  coordinates: !<asdf://weldx.bam.de/weldx/tags/core/variable-0.1.1>
                    name: coordinates
                    dimensions: [c]
                    dtype: <f8
                    units: !<asdf://weldx.bam.de/weldx/tags/units/units-0.1.0> millimeter
                    data: !core/ndarray-1.0.0
                      data: []
                      datatype: float64
                      shape: [3]
                welding_voltage: !<asdf://weldx.bam.de/weldx/tags/core/time_series-0.1.1>
                  units: !<asdf://weldx.bam.de/weldx/tags/units/units-0.1.0> volt
                  value: 20
        - - - - TCP: !<asdf://weldx.bam.de/weldx/tags/core/transformations/local_coordinate_system-0.1.0>
                  coordinates: !<asdf://weldx.bam.de/weldx/tags/core/variable-0.1.1>
                    name: coordinates
                    dimensions: [c]
                    dtype: <f8
                    units: !<asdf://weldx.bam.de/weldx/tags/units/units-0.1.0> millimeter
                    data: !core/ndarray-1.0.0
                      data: []
                      datatype: float64
                      shape: [3]
                welding_voltage: !<asdf://weldx.bam.de/weldx/tags/core/time_series-0.1.1>
                  units: !<asdf://weldx.bam.de/weldx/tags/units/-0.1.0> volt
                  value: 30
